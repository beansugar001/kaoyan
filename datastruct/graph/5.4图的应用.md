# 有向无环图描述表达式
### 有向无环图定义
    若一个有向图中不存在环,则称为有向无环图,简称DAG图
### 性质
    顶点的操作数不重复
    图不唯一
### 解题方法
    步骤1:把各个操作数不重复地排成一排
    步骤2:标出各个运算符的生效顺序(先后顺序有点出入无所谓)
    步骤3:按顺序加入运算符，注意"分层"
    步骤4:从底向上逐层检查同层的运算符是否可以合体
# 拓扑排序
AOV网(Activity On Vertex Network，用顶点表示活动的网):用DAG图(有向无环图)表示一个工程。顶点表示活动，有向边$<v_i,V_j>$表示活动$V_i$必须先于活动$V_j$进行
### 拓扑排序的定义
拓扑排序:在图论中，由一个有向无环图的顶点组成的序列，当且仅当满足下列条件时，称为该图的一个拓扑排序:
1)  每个顶点出现且只出现一次。
2)  若顶点4在序列中排在顶点B的前面，则在图中不存在从顶点B到顶点4的路径。
或定义为:拓扑排序是对有向无环图的顶点的一种排序，它使得若存在一条从顶点4到顶点B的路径，则在排序中顶点B出现在顶点4的后面。每个AOV网都有一个或多个拓扑排序序列。
### 拓扑排序的实现
1) 从AOV网中选择一个没有前驱(入度为0)的顶点并输出。
2) 从网中删除该顶点和所有以它为起点的有向边。
3) 重复①和②直到当前的AOV网为空或当前网中不存在无前驱的顶点为止
### 代码
```c++
bool TopologicalSort(Graph G){
    InitStack(S);
    for(int i=0;i<G.vexnum;i++)
        if(indegree[i]==0)
            Push(S,i);//将所有入度为0的顶点进栈
    int count=0;//计数，记录当前已经输出的顶点数
    while(!IsEmpty(S)){//栈不空，则存在入度为0的顶点
        Pop(S,i);//栈顶元素出栈
        print[count++]=i;//输出顶点i
        for(p=G.vertices[i].firstarc;p;p=p->nextarc){//将所有i指向的顶点的入度减1，并且将入度减为0的顶点压入栈s
            v=p->adjvex;
            if(!(--indegree[v]))
                Push(S,v);//入度为0，则入栈
        }
    }//while
    if(count<G.vexnum)//排序失败，有向图中有回路
        return false;
    else
        return true;
}
```
### 时间复杂度
上面代码用邻接表存储,时间复杂度为$O(|V+E|)$
若用邻接矩阵,则$O(|V^2|)$
### 逆拓扑排序
对一个AOV网，如果采用下列步骤进行排序，则称之为逆拓扑排序
1) 从AOV网中选择一个没有后继(出度为0)的顶点并输出。
2) 从网中删除该顶点和所有以它为终点的有向边。
3) 重复1)和2)直到当前的AOV网为空
# 关键路径
在带权有向图中，以顶点表示事件，以有向边表示活动，以边上的权值表示完成该活动的开销(如完成活动所需的时间)称之为用边表示活动的网络，简称**AOE网**(Activity On Edge NetWork)
在AOE网中仅有一个入度为0的顶点，称为**开始顶点**(源点)，，它表示整个工程的开始;也仅有一个出度为0的顶点，称为**结束顶点**(汇点)，它表示整个工程的结束。
从源点到汇点的有向路径可能有多条，所有路径中，具有最大路径长度的路径称为**关键路径**，而把关键路径上的活动称为**关键活动**
完成整个工程的最短时间就是关键路径的长度，若关键活动不能按时完成，则整个工程的完成时间就会延长。
**事件$v_k$的最早发生时间ve(k)**:决定所有从$v_k$开始的活动能够开工的最早时间
**活动$a_i$的最早开始时间e(i)**:指该活动弧的起点所表示的事件的最早发生时间
**事件$v_k$的最晚发生时间vl(k)**:它是指在不推迟整个工程完成的前提下,该事件最迟必须发生的时间.
**活动$a_i$的最晚开始时间e(i)**:指该活动弧的终点所表示时间的最迟发生事件与该活动所需的时间之差
**活动$α_i$的最早开始时间e(i)**--指该活动弧的起点所表示的事件的最早发生时间
活动$α_i$的最迟开始时间l(i)--它是指该活动弧的终点所表示事件的最迟发生时间与该活动所需时间之差
活动$α_i$的时间余量d(i)=l(i)-e(i)，表示在不增加完成整个工程所需总时间的情况下，活动$α_i$可以拖延的时间若一个活动的时间余量为零，则说明该活动必须要如期完成，d(i)=0即l(i)=e(i)的活动a,是$α_i$
若关键活动耗时增加，则整个工程的工期将增长
缩短关键活动的时间，可以缩短整个工程的工期
当缩短到一定程度时,关键活动可能会变成非关键活动
可能有多条关键路径，只提高一条关键路径上的关键活动速度并不能缩短整个工程的工期，只有加快那些包括在所有关键路径上的关键活动才能达到缩短工期的目的。